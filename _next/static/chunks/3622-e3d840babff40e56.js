"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3622],{55688:function(e,n,t){var i=t(85893),r=t(67294),o=t(45697),a=t.n(o),l=t(14866),s=t(46901);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var d=r.forwardRef((function(e,n){return(0,i.jsx)(s.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){c(e,n,t[n])}))}return e}({elevation:6,ref:n,variant:"filled"},e))}));function u(e){var n=e.openSnackbar,t=e.message,o=e.severity,a=e.closeHandlerCB,s=void 0===a?function(){}:a,c=(0,r.useState)(n),u=c[0],p=c[1];(0,r.useEffect)((function(){p(n)}),[n]);var f=function(){p(!1),s()};return(0,i.jsx)(l.Z,{open:u,autoHideDuration:3e3,onClose:f,children:(0,i.jsx)(d,{onClose:f,severity:o,sx:{width:"100%"},children:t})})}u.propTypes={openSnackbar:a().bool,message:a().string,severity:a().string},n.Z=u},30340:function(e,n,t){t.d(n,{Z:function(){return G}});var i=t(85893),r=t(67294),o=t(9473),a=t(11163),l=t(45697),s=t.n(l),c=t(41664),d=t(21023),u=t(76295),p=t(11057),f=t(56863),m=t(87357),g=t(86886),x=t(93946),b=t(61903),h=t(15861),v=t(11829),y=t(19227),j=t(22094),Z=t(98456),w=t(87918),S=t(67720),O=t(40044),_=t(88409),k=t(53063),T=t(47426),P=t(901),C=t(24478),E={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:function(e){return e.spacing(1)},textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)},padding:function(e){return e.spacing(3)}},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},conditionLegend:{borderRadius:function(e){return e.spacing(1)},width:"100%",padding:function(e){return e.spacing(1)},border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:function(e){return e.spacing(1)}},recSeasonal:{marginTop:function(e){return e.spacing(1)},"& p, ul, ol":{fontSize:"14px"}},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"50px"}},pdfcontent:{ul:{paddingLeft:3}}};function I(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){I(e,n,t[n])}))}return e}function F(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function R(e){var n=function(e){var n=e.children,t=e.value,r=e.index,o=F(e,["children","value","index"]);return(0,i.jsx)("div",D({role:"tabpanel",hidden:t!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},o,{children:t===r&&(0,i.jsx)(m.Z,{sx:{p:3,whiteSpace:e.smsstyle},children:n})}))},t=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},a=e.options,l=e.smstext,s=e.loading,d=e.handleSave,u=e.handlePreview,x=e.show,b=void 0===x||x,v=e.isCreateDisabled,y=void 0!==v&&v,j=e.reportType,I=void 0===j?"seasonal":j,R=e.formTitle,z=void 0===R?"":R,L=(0,o.I0)(),A=(0,o.v9)((function(e){return e.recommendations})).filtered_recommendations,M=(0,o.v9)((function(e){return e.reports})),W=M.error,N=M.status,B=(0,o.v9)((function(e){return e.dashboard.isEnglish})),H=(0,r.useState)(0),G=H[0],V=H[1],q=(0,r.useState)(!1),Y=q[0],U=q[1];(0,r.useEffect)((function(){U(a.loading||N===P.G.PENDING)}),[a.loading,N]);return(0,i.jsxs)(g.ZP,{container:!0,sx:E.container,gap:3,style:{marginTop:"24px"},children:[(0,i.jsxs)(g.ZP,{item:!0,sx:E.item,xs:12,lg:12,children:[(0,i.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)(h.Z,{variant:"h6",children:"Crop Recommendations"}),(0,i.jsx)(Z.Z,{size:24,color:"primary",sx:{display:s?"block":"none"}})]}),null!==A&&b&&(0,i.jsxs)(m.Z,{children:[(0,i.jsxs)(m.Z,{sx:{display:{md:"block",lg:"flex"}},children:[(0,i.jsx)(h.Z,{variant:"h5",sx:{flexGrow:{xs:12,sm:3}},children:z}),(0,i.jsx)(m.Z,{sx:{flexGrow:{xs:12,sm:1}},children:(0,i.jsxs)(m.Z,{sx:E.conditionLegend,style:{visibility:null!==a.sel_month&&b&&"tenday"===I?"hidden":"block",color:[T.MW.ABOVE_NORMAL.label,T.MW.WAY_BELOW_NORMAL.label].includes(a.sel_condition.label)?"#fff":"#000",backgroundColor:T.tN[a.sel_condition.label]},children:[(0,i.jsx)(h.Z,{variant:"subtitle2",children:"Rainfall Intensity"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:a.sel_condition.current_date})," \xa0",(0,i.jsxs)("span",{children:[a.sel_condition.format," ","(",a.sel_condition.tenday,")"]})]})]})})]}),(0,i.jsxs)(m.Z,{sx:{width:"100%",marginTop:{xs:"85px",lg:"0px"}},children:[(0,i.jsx)(m.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,i.jsxs)(_.Z,{value:G,onChange:function(e,n){V(n)},"aria-label":"basic tabs example",children:[(0,i.jsx)(O.Z,D({label:"PDF FORM"},t(0))),(0,i.jsx)(O.Z,D({label:"SMS FORM"},t(1)))]})}),(0,i.jsxs)(n,{value:G,index:0,smsstyle:"normal",children:[(0,i.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,i.jsx)(h.Z,{variant:"h4",children:"Practices"}),(0,i.jsx)(w.Z,{size:"medium",variant:"outlined",label:B?"Tagalog":"English",onClick:function(){return L((0,k.cX)())},sx:{width:"90px"}})]}),Object.keys(A).map((function(e){return Object.keys(A[e]).map((function(n,t){return(0,i.jsxs)(m.Z,{sx:E.recSeasonal,children:[(0,i.jsxs)(h.Z,{variant:"h6",children:[e," - ",n]}),(0,i.jsx)(C.Z,{recommendations:A[e][n],title:"",subtitle:"",titleFontSize:"h6",isTagalog:!B,isShowTitle:!1})]},"rec-".concat(t))}))}))]}),(0,i.jsx)(n,{value:G,index:1,smsstyle:"pre-wrap",children:l})]})]})]}),(0,i.jsxs)(m.Z,{sx:{marginBottom:"16px",width:"100%",display:null!==A&&b?"block":"none"},children:[(0,i.jsx)("br",{}),(0,i.jsx)(S.Z,{}),(0,i.jsx)("br",{}),""!==W&&(0,i.jsxs)(h.Z,{variant:"caption",sx:{color:"red"},children:["Error: ",W]}),(0,i.jsxs)(f.Z,{size:"large","aria-label":"large button group",sx:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:[(0,i.jsx)(c.default,{href:"/admin/bulletins/crops",passHref:!0,children:(0,i.jsx)(p.Z,{disabled:Y,children:"Cancel"})}),(0,i.jsxs)(p.Z,{onClick:u,disabled:Y,children:[(0,i.jsx)("span",{style:{display:Y?"none":"block"},children:"Preview"})," ","\xa0",(0,i.jsx)(Z.Z,{size:20,color:"secondary",sx:{display:Y?"block":"none"}})]}),(0,i.jsx)(p.Z,{variant:"contained",onClick:d,disableElevation:!0,disabled:Y||y,children:"Save"})]})]})]})}R.propTypes={options:s().object,smstext:s().string,keyEng:s().string,keyTag:s().string,formTitle:s().string,isCreateDisabled:s().bool,show:s().bool,loading:s().bool,handleSave:s().func,handlePreview:s().func};var z=R,L=t(79316),A=t(55688),M=t(12671),W=t(22757);function N(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){N(e,n,t[n])}))}return e}function H(e){var n=(0,r.useState)(!1),t=n[0],l=n[1],s=(0,a.useRouter)(),Z=(0,o.I0)(),w=e.open,S=e.loading,O=e.isloadingreport,_=e.isdisabled,k=e.climateRisk,T=e.optsprovinces,P=e.optsmunicipalities,C=e.optscrops,E=e.optscropstages,I=e.optsactivities,D=e.sel_options,F=e.message,R=e.smstext,N=e.pageTitle,H=void 0===N?"":N,G=e.pageDescription,V=void 0===G?"":G,q=e.pdfPreview,Y=e.handlePreview,U=e.handleSave,J=e.resetSelections,X=e.togglePrompt,$=e.toggleViewerOpen,K=e.onSelectItemChange,Q=(0,o.v9)((function(e){return e.reports})).report,ee="Invalid year";(0,r.useEffect)((function(){null===D.sel_municipality&&!0===t&&l(!1)}),[D.sel_municipality,t]);var ne=function(){Q&&(Z((0,M.s_)()),s.push("/admin/bulletins/crops/report/view/?docId=".concat(Q.id)))},te=function(){var e="Loading...";return T.length>0&&(e=null===D.sel_province?"Select a province":"Province"),e};return(0,i.jsxs)("div",{children:[(0,i.jsx)(y.Z,{isOpen:F.isOpen,maxWidth:"xs",openButtonText:null,title:F.title,contentText:F.msg,loading:F.loading,modalCancelHandlerCB:function(){F.savesuccess?ne():X()},modalConfirmHandlerCB:function(){F.savesuccess?ne():U()}}),(0,i.jsx)(j.Z,{open:w,pdfPreview:q,error:D.error,loading:D.loading,toggleViewerOpen:$}),(0,i.jsx)(A.Z,{openSnackbar:""!==D.error,message:D.error,severity:"warning"}),(0,i.jsxs)(g.ZP,{container:!0,sx:W.Z.container,children:[(0,i.jsxs)(m.Z,{sx:W.Z.headerText,children:[(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(h.Z,{variant:"h5",children:H}),(0,i.jsx)("p",{dangerouslySetInnerHTML:{__html:V}})]}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(x.Z,{"aria-label":"exit",size:"medium",children:(0,i.jsx)(c.default,{href:"/admin/bulletins/crops",passHref:!0,children:(0,i.jsx)(d.Z,{fontSize:"inherit"})})})})]}),(0,i.jsxs)(g.ZP,{item:!0,sx:W.Z.item,xs:12,lg:4,children:[(0,i.jsx)(h.Z,{variant:"h6",children:"Selection Options"}),(0,i.jsx)(u.Z,{disablePortal:!0,id:"province",size:"small",value:D.sel_province,disabled:0===T.length||D.error.includes(ee)||S,options:T,sx:W.Z.autocomplete,PaperComponent:v.Z,renderInput:function(e){return(0,i.jsx)(b.Z,B({},e,{label:te()}))},getOptionDisabled:function(e){return e.disabled},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){return K(e,B({},n,{from:"province"}))}}),(0,i.jsx)(u.Z,{disablePortal:!0,id:"municipality",size:"small",value:D.sel_municipality,disabled:0===P.length||D.error.includes(ee)||S,options:P,sx:W.Z.autocomplete,PaperComponent:v.Z,renderInput:function(e){return(0,i.jsx)(b.Z,B({},e,{label:null===D.sel_municipality?"Select a municipality":"Municipality"}))},getOptionDisabled:function(e){return e.disabled||void 0!==e.iscalendar},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){K(e,B({},n,{from:"municipality"})),l(!1)}}),(0,i.jsx)(u.Z,{disablePortal:!0,id:"crop",size:"small",value:D.sel_crop,disabled:0===C.length||S||!D.sel_municipality,options:C,sx:W.Z.autocomplete,PaperComponent:v.Z,renderInput:function(e){return(0,i.jsx)(b.Z,B({},e,{label:null===D.sel_crop?"Select a crop type":"Crop"}))},isOptionEqualToValue:function(e,n){return e.label===n},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){K(e,B({},n,{from:"crop"})),l(!1)}}),(0,i.jsxs)(f.Z,{disableElevation:!0,size:"small","aria-label":"outlined button controls group",disabled:O||null===D.sel_municipality||"-"===D.sel_crop,sx:{marginTop:"16px",float:"right"},children:[(0,i.jsx)(p.Z,{variant:"outlined",disabled:S||O,onClick:J,children:"Reset"}),(0,i.jsx)(p.Z,{variant:"contained",onClick:function(){return l((function(e){return!e}))},disabled:S||null===D.sel_month||0===E.length||""!==D.error||t,children:"Generate"})]})]}),(0,i.jsx)(g.ZP,{item:!0,sx:W.Z.item,xs:12,lg:8,children:(0,i.jsx)(L.Z,{climateRisk:k,selecteditems:D,cropstages:null===E||void 0===E?void 0:E.map((function(e){return e.label})).toString().split(",").join(", "),farmoperations:I.map((function(e){return e.label})).toString().split(",").join(", "),loading:S,reportType:"tenday"})})]}),(0,i.jsx)(z,{show:t,loading:S,keyEng:"practice",keyTag:"practice_tagalog",formTitle:H,reportType:"tenday",options:D,smstext:R,isCreateDisabled:_,handlePreview:Y,toggleViewerOpen:$,pdfPreview:q,handleSave:X})]})}H.propTypes={climateRisk:s().string,optsprovinces:s().array,optsmunicipalities:s().array,optscrops:s().array,optscropstages:s().array,optsactivities:s().array,sel_options:s().object,loading:s().bool,isloadingreport:s().bool,isdisabled:s().bool,open:s().bool,message:s().object,smstext:s().string,pageTitle:s().string,pageDescription:s().string,pdfPreview:s().object,onSelectItemChange:s().func,handlePreview:s().func,handleSave:s().func,toggleViewerOpen:s().func,resetSelections:s().func,togglePrompt:s().func};var G=H},24478:function(e,n,t){var i=t(85893),r=t(67294),o=t(45697),a=t.n(o),l=t(87918),s=t(15861),c=t(37634);function d(e){var n=e.recommendations,t=void 0===n?[]:n,o=e.title,a=void 0===o?"":o,d=e.titleFontSize,u=void 0===d?"h5":d,p=e.recommendationsEng,f=void 0===p?"management_recommendations_english":p,m=e.recommendationsTag,g=void 0===m?"management_recommendations_tagalog":m,x=e.impactOutlookEng,b=void 0===x?"impact_outlook_english":x,h=e.impactOutlookTag,v=void 0===h?"impact_outlook_tagalog":h,y=e.isTagalog,j=void 0===y?null:y,Z=e.isShowTitle,w=void 0===Z||Z,S=(0,r.useState)(!0),O=S[0],_=S[1];return(0,r.useEffect)((function(){null!==j&&_(!j)}),[j]),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{display:"flex",marginBottom:"20px"},children:[w&&(0,i.jsx)("div",{style:{flexGrow:1},children:(0,i.jsxs)(s.Z,{variant:u,children:[a," Recommendations"]})}),null===j&&(0,i.jsx)(l.Z,{variant:"outlined",size:"small",label:O?"Tagalog":"English",onClick:function(){return _((function(e){return!e}))},className:"toggleButton"})]}),t.length>0?(0,i.jsxs)("div",{children:[(0,i.jsx)(s.Z,{variant:"subtitle1",children:"Impact Outlooks"}),t.map((function(e,n){return(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:O?e[b]||"No Impact Outlook":e[v]||"Walang makitang impak awtluk"}},n)})),(0,i.jsx)("br",{}),(0,i.jsx)(s.Z,{variant:"subtitle1",children:"Recommendations"}),t.map((function(e,n){return(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:O?e[f]||"No Recommendations":e[g]||"Walang makitang rekomendasyon"}},n)}))]}):(0,i.jsx)(c.Z,{message:"We cannot find recommendations for your selected options."})]})}d.propTypes={recommendations:a().array,title:a().string,subtitle:a().string,titleFontSize:a().string,recommendationsEng:a().string,recommendationsTag:a().string,isTagalog:a().bool,isShowTitle:a().bool},n.Z=d},94640:function(e,n,t){t.d(n,{Z:function(){return u}});var i=t(67294),r=t(9473),o=t(47426),a=t(56867),l=t(77715),s=t(901);function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function d(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,n){var t=(0,i.useState)([]),c=t[0],u=t[1],p=(0,i.useState)(null),f=p[0],m=p[1],g=(0,i.useState)(""),x=g[0],b=g[1],h=(0,i.useState)(""),v=h[0],y=h[1],j=(0,i.useState)(!1),Z=j[0],w=j[1],S=(0,r.I0)(),O=(0,r.v9)((function(e){return e.tendayweather})),_=O.ids,k=O.status,T=O.entities,P=O.error;return(0,i.useEffect)((function(){null!==e&&(b(""),y(""),S((0,a.R)(e)))}),[e,S]),(0,i.useEffect)((function(){b(P)}),[P]),(0,i.useEffect)((function(){w(k===s.G.PENDING)}),[k]),(0,i.useEffect)((function(){if(b(""),y(""),k===s.G.FULLFILLED&&_.length>0&&""===P&&null!==n){var e=Object.values(T).find((function(e){return e.municipality===n}));if(void 0!==e){var t,i,r=JSON.parse(e.data),a=Object.values(o.MW);u(r.reduce((function(e,n,o){var s,c,u;return d(e).concat([{id:o,label:n.day_format,label_full:null===(s=(0,l.Ay)(n.day_format,r[9].day_format))||void 0===s?void 0:s.toDateString(),rainfall:n.rainfall,forecast:null!==(t=null===(c=a.find((function(e){return e.tenday===n.rainfall})))||void 0===c?void 0:c.sync)&&void 0!==t?t:"-",code:null!==(i=null===(u=a.find((function(e){return e.tenday===n.rainfall})))||void 0===u?void 0:u.label)&&void 0!==i?i:"-"}])}),[]));var c=new Date(1e3*r[0].date_start.seconds),p=(0,l.Mn)(c);c.getFullYear()!==(new Date).getFullYear()&&b("Invalid year detected in the 10-day validity date range: ".concat(r[0].date_range)),m({months:p,date_start:c,date_range:r[0].date_range})}else{var f=P||"Weather data for the municipality is not available at the moment, however, you can continue viewing recommendations. Please verify that the municipality name is present in the 10-Day weather forecast.";P?(u([]),m(null),b(f)):y(f)}}}),[n,T,_,k,P]),{days:c,summary:f,loading:Z,error:x,warning:v}}}}]);