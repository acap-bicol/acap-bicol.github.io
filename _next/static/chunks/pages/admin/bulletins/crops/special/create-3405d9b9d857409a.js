(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4169],{13063:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/special/create",function(){return t(70012)}])},70012:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ce}});var r=t(34051),a=t.n(r),o=t(85893),u=t(67294),i=t(9473),c=t(87682),l=t(30340),s=t(66383),f=t(95243),p=t(30560),d=t(1029),v=t(16327),y=t(61690),m=t(87006),g=t(24530),b=t(901),h=t(76490),S=t(33050),_=t(77715);function E(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var A,O,w="plant/trans",P="veg/repro",L="mat",I="lprep",x="none",N=(E(A={},I,"Preparation Stage"),E(A,w,"Newly Planted"),E(A,P,"Vegetative/Reproductive"),E(A,L,"Maturing"),A),k=(E(O={},w,"plant"),E(O,P,"grow"),E(O,L,"harv"),E(O,I,"prep"),Object.keys(N).map((function(e){return e.toLowerCase()}))),C=(Object.values(N),"1st_half"),T="2nd_half";function R(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function j(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return R(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return R(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function M(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Y(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return D(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,n,t){var r=(0,u.useState)([]),a=r[0],o=r[1];return(0,u.useEffect)((function(){if((null===e||void 0===e?void 0:e.data)&&(null===n||void 0===n?void 0:n.data)&&t.length>0&&0===a.length){var r=e.data.map((function(e){return e.province})).filter((function(e,n,t){return t.indexOf(e)===n})),u=e.data.reduce((function(e,n){return void 0===e[n.province]&&(e[n.province]=[]),e[n.province]=Y(e[n.province]).concat(Y(n.municipalities)),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){M(e,n,t[n])}))}return e}({},e)}),{}),i=Y(t);i.forEach((function(n){n.disabled=!r.includes(n.label),n.municipalities.forEach((function(t){var r=e.data.findIndex((function(e){return e.province===t.province&&e.municipalities.includes(t.label)}));n.disabled?t.disabled=!0:(t.disabled=!u[n.label].includes(t.label),t.signal=r>-1?e.data[r].signal:0)}))})),o(i)}}),[e,n,t,a]),{affectedprovinces:a}}var H=t(51520);function B(e,n,t,r,a,o,u){try{var i=e[o](u),c=i.value}catch(l){return void t(l)}i.done?n(c):Promise.resolve(c).then(r,a)}function K(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function u(e){B(o,r,a,u,i,"next",e)}function i(e){B(o,r,a,u,i,"throw",e)}u(void 0)}))}}var W=t(23766);function F(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function U(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return F(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=t(94640),V=t(16013),$=t(27392),J=t(47426),X=t(53063),q=t(12671),Q=t(87661),z=t(87784);function ee(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ne(e,n,t,r,a,o,u){try{var i=e[o](u),c=i.value}catch(l){return void t(l)}i.done?n(c):Promise.resolve(c).then(r,a)}function te(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function u(e){ne(o,r,a,u,i,"next",e)}function i(e){ne(o,r,a,u,i,"throw",e)}u(void 0)}))}}function re(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){re(e,n,t[n])}))}return e}function oe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],u=!0,i=!1;try{for(t=t.call(e);!(u=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);u=!0);}catch(c){i=!0,a=c}finally{try{u||null==t.return||t.return()}finally{if(i)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ee(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ee(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ue={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:[],sel_month:null,processed:!1,loading:!1,error:"",success:"",sel_condition:{id:0,from:"weather_condition",label:J.MW.WAY_BELOW_NORMAL.label}},ie={url:"",filename:""};var ce=(0,f.Z)((function(e){var n=e.user,t=e.onBtnLogoutClick,r=e.loading,f=(0,u.useState)(ue),E=f[0],A=f[1],O=(0,u.useState)([]),w=O[0],P=O[1],L=(0,u.useState)([]),I=L[0],R=L[1],D=(0,u.useState)(null),M=D[0],Y=D[1],B=(0,Z.Z)(E.sel_province,E.sel_municipality),F=B.days,ee=B.loading,ne=B.error,ce=B.summary,le=oe((0,c.ky)(d.K.GLOBAL_COLLECTIONS,d.K.CYCLONE_ADVISORY),2),se=le[0],fe=le[1],pe=oe((0,c.ky)(p.M.WEATHER_FORECASTS,"".concat("bicol","/").concat(p.M.SUB_SPECIAL_COMMON,"/").concat(p.M.COMMON_SPECIAL_TYPE.WIND_SPEED)),2),de=pe[0],ve=pe[1],ye=(0,u.useState)([]),me=ye[0],ge=ye[1],be=G(de,se,me).affectedprovinces,he=(0,W.Z)(E.sel_province,be),Se=(0,S.Z)(E.sel_province),_e=Se.cropcalendar,Ee=Se.loading,Ae=Se.error,Oe=(0,h.Z)(_e,E.sel_municipality),we=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,u.useState)([]),o=a[0],i=a[1],c=(0,u.useState)(null),l=c[0],s=c[1],f=(0,u.useState)([]),p=f[0],d=f[1],v=(0,u.useState)(""),y=v[0],m=v[1],g=(0,u.useState)(null),b=g[0],h=g[1],S=(0,u.useState)(""),E=S[0],A=S[1],O=function(e,n){return e.findIndex((function(e){return e.code===n}))>=0},w=function(e){return new Date(e).toLocaleDateString()},P=function(){i([]),d([]),s(null),m(""),h(null)};return(0,u.useEffect)((function(){if(A(""),e&&n&&t.length>0&&e.length>0){var a=e[0].municipality;if(a===y&&b===w(null!==n&&void 0!==n?n:null))return;var o=j(t),u=new Date(n),c=(0,_.Mn)(u,r);try{var l={},f=[];o.forEach((function(n){void 0===l[n.label]&&(l[n.label]=[]);var t=0,r=0;Object.keys(c).forEach((function(a){var o=e.find((function(e){return e.crop===n.label}));if(!o)throw new Error("Cannot find cropping calendar for ".concat(n.label));var u=o[a];if(void 0===u||""===u)throw new Error("Crop stages data for ".concat(a," does not exist."));for(var i=u.split(","),s=0;s<c[a].length;s+=1)if(c[a][s]===C)if(r+=1,i[0]!==x){var p={id:l[n.label].length,label:N[i[0]],code:i[0],municipality:o.municipality};l[n.label].push(p),O(f,i[0])||f.push(p)}else t+=1;else if(c[a][s]===T)if(r+=1,i[1]!==x){var d={id:l[n.label].length,label:N[i[1]],code:i[1],municipality:o.municipality};l[n.label].push(d),O(f,i[1])||f.push(d)}else t+=1})),n.disabled=t===r})),m(a),s(l),i(o),d(f),h(w(n))}catch(p){P(),A(p.message)}}0===e.length&&P()}),[e,n,b,t,y,r]),{cropslist:o,cropstagesbycrop:l,uniquecropstages:p,error:E}}(w,(0,_.aV)(!1),Oe),Pe=we.cropslist,Le=we.uniquecropstages,Ie=we.error,xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(0,u.useState)([]),i=o[0],c=o[1],l=(0,u.useState)([]),s=l[0],f=l[1],p=(0,u.useState)(null),d=p[0],v=p[1],y=(0,u.useState)(!1),m=y[0],g=y[1],b=(0,u.useState)(""),h=b[0],S=b[1];return(0,u.useEffect)((function(){v(e)}),[e]),(0,u.useEffect)((function(){var e=function(){var e=K(a().mark((function e(){var o,u,i,l,s,p,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],g(!0),S(""),r){e.next=11;break}return e.next=8,(0,H.to)({cropstage:d,forecast:null!==(u=null===n||void 0===n?void 0:n.code)&&void 0!==u?u:"",type:t});case 8:o=e.sent,e.next=15;break;case 11:return e.next=14,(0,H.cQ)({cropstages:d.split(","),forecast:null!==(i=null===n||void 0===n?void 0:n.code)&&void 0!==i?i:"",type:t});case 14:o=e.sent;case 15:l=o.map((function(e){return e.farm_operation})).filter((function(e,n,t){return t.indexOf(e)===n})).reduce((function(e,n,t){return e.push({id:t,label:n}),e}),[]),g(!1),f(l),c(o||[]),e.next=28;break;case 21:e.prev=21,e.t0=e.catch(0),v=null!==(p=null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.data)&&void 0!==p?p:e.t0.message,S(v),g(!1);case 28:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();d?e():(c([]),f([]))}),[d,n,t,r]),{recommendations:i,farmoperations:s,loading:m,error:h}}(M,null,V.q.SPECIAL,!0),Ne=xe.recommendations,ke=xe.farmoperations,Ce=xe.loading,Te=xe.error,Re=function(e){var n=(0,u.useState)(null),t=n[0],r=n[1],a=(0,u.useState)(""),o=a[0],i=a[1];return(0,u.useEffect)((function(){if(i(""),e.length>0){var n=e.map((function(e){return e.farm_operation})).filter((function(e,n,t){return t.indexOf(e)===n}));try{r(k.reduce((function(t,r){return n.forEach((function(n){var a=N[r],o=e.filter((function(e){return e.crop_stage===r&&e.farm_operation===n}));o.length>0&&a&&(void 0===t[a]&&(t[a]={}),void 0===t[a][n]&&(t[a][n]=[]),t[a][n]=U(t[a][n]).concat(U(o)))})),t}),{}))}catch(t){r(null),i(t)}}else r(null)}),[e]),{group:t,error:o}}(Ne),je=Re.group,De=Re.error,Me=(0,i.v9)((function(e){return e.reports})),Ye=Me.status,Ge=Me.report,He=(0,i.v9)((function(e){return e.dashboard.reportType})),Be=(0,i.v9)((function(e){return e.dashboard.isEnglish})),Ke=(0,u.useState)(!0),We=Ke[0],Fe=Ke[1],Ue=(0,u.useState)(!1),Ze=Ue[0],Ve=Ue[1],$e=(0,u.useRef)(!1),Je=(0,u.useState)(""),Xe=Je[0],qe=Je[1],Qe=(0,u.useState)(ie),ze=Qe[0],en=Qe[1],nn=(0,u.useState)($.BF),tn=nn[0],rn=nn[1],an=(0,i.I0)();(0,u.useEffect)((function(){$e.current=!0;var e=function(){var e=te(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.$m)();case 3:n=e.sent,$e&&ge(n.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){$e.current=!1}}),[]),(0,u.useEffect)((function(){an((0,g.Km)([])),an((0,q.s_)())}),[an]),(0,u.useEffect)((function(){null!==ce&&A((function(e){return ae({},e,{sel_month:{label:(0,_.aV)()}})}))}),[ce]),(0,u.useEffect)((function(){Fe(r||Ee||Ce||ee||fe===b.G.PENDING||ve===b.G.PENDING)}),[r,Ee,Ce,ee,fe,ve]),(0,u.useEffect)((function(){en(ie)}),[Be]),(0,u.useEffect)((function(){if(""!==Ae||""!==Te||""!==ne||""!==Ie){var e=Ae||Te||ne||Ie;A((function(n){return ae({},n,{error:e})}))}else A((function(e){return ae({},e,{error:""})}))}),[Ie,Te,ne,Ae]),(0,u.useEffect)((function(){null===E.sel_municipality||ee||fe===b.G.PENDING||qe((function(e){var n,t,r,a;return(0,Q.smsWriter)({type:Q.SMS_TYPE.SPECIAL,replacements:(a={},re(a,Q.REPLACE_KEYS.SPECIAL.TYPHOON_NAME,(null===se||void 0===se||null===(n=se.meta)||void 0===n?void 0:n.typhoon_name)||"-"),re(a,Q.REPLACE_KEYS.SPECIAL.TYPHOON_SIGNAL,(null===E||void 0===E||null===(t=E.sel_municipality)||void 0===t?void 0:t.signal)||0),re(a,Q.REPLACE_KEYS.SPECIAL.MUNICIPALITY,(null===E||void 0===E||null===(r=E.sel_municipality)||void 0===r?void 0:r.label)||"-"),a)})}))}),[F,ee,se,fe,E.sel_municipality]),(0,u.useEffect)((function(){Ye===b.G.FULLFILLED&&null!==Ge&&$e.current&&rn((function(e){return ae({},e,{msg:"Success! Bulletin report created.",loading:!1,savesuccess:!0,docId:Ge.id})}))}),[Ye,Ge]),(0,u.useEffect)((function(){De||null===je||an((0,g.Km)(je))}),[je,De,an]),(0,u.useEffect)((function(){if(!r&&""===E.error)if(Le.length>0){var e=Le.map((function(e){return e.code})).toString(),n=Le.map((function(e){return e.label})).toString();Y(e),A((function(e){return ae({},e,{sel_crop:Pe.map((function(e){return e.label})).toString().split(",").join(", "),sel_stage:n})}))}else an((0,g.Km)([])),null!==E.sel_municipality&&A((function(e){return ae({},e,{error:"No crop stages are available for this date on ".concat(e.sel_municipality,".")})}))}),[Le,Pe,r,,an]);var on=function(){var e=te(a().mark((function e(){var n,t,r,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===ze.url){e.next=3;break}return Ve(!0),e.abrupt("return");case 3:return A((function(e){return ae({},e,{loading:!0,error:"",success:""})})),e.prev=4,n={region:"bicol",province:E.sel_province,municipality:E.sel_municipality,date:(new Date).toDateString(),operation:"preview",language:Be?"en":"tag",crop:"Rice"},Ve(!0),A((function(e){return ae({},e,{loading:!0,error:""})})),e.next=10,(0,m.U1)(n);case 10:t=e.sent,r=new Blob([t],{type:"application/pdf"}),(o={}).href=URL.createObjectURL(r),o.download="".concat(E.sel_province,"_").concat(E.sel_municipality,".pdf"),en((function(e){return ae({},e,{url:o.href,filename:o.download})})),A((function(e){return ae({},e,{loading:!1,success:"Bulletin preview created."})})),e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(4),e.next=23,(0,z.fu)(e.t0);case 23:u=e.sent,A((function(e){return ae({},e,{loading:!1,error:u})}));case 25:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(){return e.apply(this,arguments)}}(),un=function(){var e=te(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rn(ae({},tn,{loading:!0,msg:"Saving report..."}));try{t={region:"bicol",province:E.sel_province,municipality:E.sel_municipality,date:(new Date).toDateString(),operation:"create",language:Be?"en":"tag",crop:"Rice"},an((0,y.tR)(t)).unwrap().then((function(){He!==$.Ry.SPECIAL_WEATHER&&(an((0,X.uq)($.Ry.SPECIAL_WEATHER)),an((0,y.RC)({uid:n.uid,type:$.Ry.SPECIAL_WEATHER})))})).catch((function(e){$e.current&&rn((function(n){return ae({},n,{msg:e,loading:!1,savesuccess:!1,docId:null})}))}))}catch(o){r="",void 0!==o.response&&(r=void 0!==o.response.data&&"[object Blob]"===((a=o.response.data)&&"undefined"!==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)?o.response.data:""),""===r&&(r=o.message),A((function(e){return ae({},e,{loading:!1,error:r})}))}case 2:case"end":return e.stop()}var a}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.jsx)(s.Z,{loading:r,user:n,onBtnLogoutClick:t,accLevel:J.DW.ADMIN,children:(0,o.jsx)(l.Z,{optsprovinces:be,optsmunicipalities:he,optscrops:Pe,optscropstages:Le,optsactivities:ke,sel_options:E,loading:We,isloadingreport:Ye===b.G.PENDING,isdisabled:!1===(null===se||void 0===se?void 0:se.has_cyclone),open:Ze,message:tn,smstext:Xe,pageTitle:"Special Weather Bulletin",pageDescription:"Create <strong>Special Weather</strong> crop recommendations bulletins. Finalized bulletins will be automatically uploaded to the site for public download.",pdfPreview:ze,onSelectItemChange:function(e,n){var t=n.from,r=n.label;if(en(ie),I.length>0&&R([]),""!==E.error&&A((function(e){return ae({},e,{error:""})})),Object.keys(n).includes("id"))switch(t){case"province":Y(null),A((function(e){return ae({},e,{sel_province:r,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null})}));break;case"municipality":Y(null),A((function(e){return ae({},e,{sel_municipality:r,sel_crop:null,sel_stage:null,sel_activity:null})})),P(_e.filter((function(e){return e.municipality===r})))}else if("province"===t){var a=E.sel_month;A(ae({},ue,{sel_month:a})),Y(null)}else"municipality"===t&&(A(ae({},E,{sel_municipality:null,sel_crop:null,sel_day:null,sel_stage:null,sel_activity:null})),Y(null))},handlePreview:on,handleSave:un,toggleViewerOpen:function(){Ve((function(e){return!e}))},resetSelections:function(){var e=E.sel_month;A(ae({},ue,{sel_month:e})),Y(null),an((0,g.Km)([]))},togglePrompt:function(){rn((function(e){return ae({},$.BF,{isOpen:!e.isOpen})}))}})})}))},76490:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(67294);function a(e,n){var t=(0,r.useState)([]),a=t[0],o=t[1];return(0,r.useEffect)((function(){if(e&&n){var t=e&&n?e.filter((function(e){return e.municipality===n})).map((function(e){return e.crop})).filter((function(e,n,t){return t.indexOf(e)===n})).map((function(e,n){return{id:n,label:e,disabled:!1}})):[];o(t)}n||o([])}),[e,n]),a}},33050:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(34051),a=t.n(r),o=t(67294),u=t(32848);function i(e,n,t,r,a,o,u){try{var i=e[o](u),c=i.value}catch(l){return void t(l)}i.done?n(c):Promise.resolve(c).then(r,a)}function c(e){var n=(0,o.useState)([]),t=n[0],r=n[1],c=(0,o.useState)(!1),l=c[0],s=c[1],f=(0,o.useState)(""),p=f[0],d=f[1];return(0,o.useEffect)((function(){var n=function(){var n,t=(n=a().mark((function n(){var t,o,i,c,l;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s(!0),n.next=4,(0,u.ih)(e);case 4:t=n.sent,s(!1),d(""),r(null!==(o=null===t||void 0===t?void 0:t.data)&&void 0!==o?o:[]),n.next=19;break;case 11:n.prev=11,n.t0=n.catch(0),l=null!==(c=null===n.t0||void 0===n.t0||null===(i=n.t0.response)||void 0===i?void 0:i.data)&&void 0!==c?c:n.t0.message,d(l),s(!1),r([]);case 19:case"end":return n.stop()}}),n,null,[[0,11]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function u(e){i(o,r,a,u,c,"next",e)}function c(e){i(o,r,a,u,c,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();e&&(d(""),n())}),[e]),{cropcalendar:t,loading:l,error:p}}},87682:function(e,n,t){"use strict";t.d(n,{ky:function(){return p},Kx:function(){return d},m$:function(){return v},tl:function(){return y}});var r=t(34051),a=t.n(r),o=t(67294),u=t(25321),i=t(96772);function c(e,n,t,r,a,o,u){try{var i=e[o](u),c=i.value}catch(l){return void t(l)}i.done?n(c):Promise.resolve(c).then(r,a)}function l(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function u(e){c(o,r,a,u,i,"next",e)}function i(e){c(o,r,a,u,i,"throw",e)}u(void 0)}))}}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){s(e,n,t[n])}))}return e}function p(e,n){var t=(0,o.useState)(null),r=t[0],c=t[1],s=(0,o.useState)(!0),f=s[0],p=s[1],d=(0,o.useState)(""),v=d[0],y=d[1],m=(0,o.useRef)(!0);return(0,o.useEffect)((function(){var t=function(){var t=l(a().mark((function t(){var r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=(0,u.JU)(i.db,e,n),t.next=4,(0,u.QT)(r);case 4:(o=t.sent).exists()&&m.current&&(c(o.data()),p(!1)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),y(t.t0.message),p(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){return m.current=!1}}),[e,n]),[r,f,v]}function d(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=(0,o.useState)([]),c=r[0],s=r[1],p=(0,o.useState)(!0),d=p[0],v=p[1],y=(0,o.useState)(""),m=y[0],g=y[1],b=(0,o.useRef)(!0);return(0,o.useEffect)((function(){var r=function(){var r=l(a().mark((function r(){var o,c,l;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=(0,u.hJ)(i.db,e),c=t||(0,u.IO)(o,(0,u.Xo)(n,"asc")),r.next=5,(0,u.PL)(c);case 5:l=r.sent,b.current&&(s(l.docs.map((function(e){return f({},e.data())}))),v(!1)),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),g(r.t0.message),v(!1);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(){return r.apply(this,arguments)}}();return r(),function(){return b.current=!1}}),[e,n,t]),{documents:c,loading:d,error:m}}function v(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=(0,o.useState)([]),s=c[0],p=c[1],d=(0,o.useState)(!0),v=d[0],y=d[1],m=(0,o.useState)(""),g=m[0],b=m[1],h=(0,o.useRef)(!0);return(0,o.useEffect)((function(){var o=function(){var o=l(a().mark((function o(){var c,l;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c=(0,u.IO)((0,u.hJ)(i.db,e,n,t),(0,u.Xo)(r)),a.next=4,(0,u.PL)(c);case 4:l=a.sent,h.current&&(p(l.docs.map((function(e){return f({},e.data())}))),y(!1)),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),b(a.t0.message),y(!1);case 12:case"end":return a.stop()}}),o,null,[[0,8]])})));return function(){return o.apply(this,arguments)}}();return o(),function(){return h.current=!1}}),[e,n,t,r]),{documents:s,loading:v,error:g}}function y(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4?arguments[4]:void 0,s=(0,o.useState)([]),p=s[0],d=s[1],v=(0,o.useState)(!0),y=v[0],m=v[1],g=(0,o.useState)(""),b=g[0],h=g[1],S=(0,o.useRef)(!0);return(0,o.useEffect)((function(){var o=function(){var o=l(a().mark((function o(){var l,s;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l=(0,u.hJ)(i.db,e,n,t),""!==r&&(l=(0,u.IO)(l,(0,u.Xo)(r))),c&&(l=(0,u.IO)(l,(0,u.b9)(c))),a.next=6,(0,u.PL)(l);case 6:s=a.sent,S.current&&(d(s.docs.map((function(e){return f({},e.data())}))),m(!1)),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),h(a.t0.message),m(!1);case 14:case"end":return a.stop()}}),o,null,[[0,10]])})));return function(){return o.apply(this,arguments)}}();return o(),function(){return S.current=!1}}),[e,n,t,r,c]),{documents:p,loading:y,error:b}}},1029:function(e,n,t){"use strict";t.d(n,{K:function(){return h},d:function(){return S}});var r=t(34051),a=t.n(r),o=t(94763),u=t(96772),i=t(47426),c=t(27392);function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,n,t,r,a,o,u){try{var i=e[o](u),c=i.value}catch(l){return void t(l)}i.done?n(c):Promise.resolve(c).then(r,a)}function f(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function u(e){s(o,r,a,u,i,"next",e)}function i(e){s(o,r,a,u,i,"throw",e)}u(void 0)}))}}function p(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,n){return!n||"object"!==g(n)&&"function"!==typeof n?l(e):n}function m(e,n){return m=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},m(e,n)}var g=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function b(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=v(e);if(n){var a=v(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return y(this,t)}}var h={MEDIA_ASSETS:"n_page_media",ASSETS:"n_page_assets",PAGE_SEARCH:"n_page_search",GLOBAL_COLLECTIONS:"w_services",TYPHOON_ADVISORY:"typhoon_advisory",CYCLONE_ADVISORY:"cyclone_advisory"},S=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&m(e,n)}(t,e);var n=b(t);function t(){var e;p(this,t);var r=l(e=n.apply(this,arguments));d(l(e),"getPageAssetsDoc",function(){var e=f(a().mark((function e(n,t){var o,u,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.length>2&&void 0!==i[2]&&i[2],u=[],e.prev=2,e.next=5,r.getDocumentData(h.ASSETS,n);case 5:if(u=e.sent){e.next=8;break}return e.abrupt("return",[]);case 8:if(t){e.next=10;break}return e.abrupt("return",u);case 10:if(!o){e.next=14;break}return e.abrupt("return",u.data.filter((function(e){return e.page===t})));case 14:return e.abrupt("return",u.data.filter((function(e){return e.page===t})).map((function(e){return e.url})));case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(2),console.error(e.t0.message),new Error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(n,t){return e.apply(this,arguments)}}());var o=l(e);d(l(e),"getTyphoonAdvisory",f(a().mark((function e(){var n,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.doc(o.db,h.GLOBAL_COLLECTIONS,h.TYPHOON_ADVISORY),e.next=3,o.getDoc(n);case 3:if(!(t=e.sent).exists()){e.next=6;break}return e.abrupt("return",t.data());case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)}))));var s=l(e);return d(l(e),"getWeatherForecast",function(){var e=f(a().mark((function e(n,t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getNestedCollectionData(h.WEATHER_FORECASTS,n,t,"name");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),d(l(e),"getPdfDownloadURL",function(){var e=f(a().mark((function e(n){var t,r,o,l=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>1&&void 0!==l[1]?l[1]:c.Ry.SEASONAL,r="",e.t0=t,e.next=e.t0===c.Ry.SEASONAL?5:e.t0===c.Ry.TEN_DAY?7:e.t0===c.Ry.SPECIAL_WEATHER?9:11;break;case 5:return r=i.Do.PDF_STORAGE_SEASONAL,e.abrupt("break",12);case 7:return r=i.Do.PDF_STORAGE_TENDAY,e.abrupt("break",12);case 9:return r=i.Do.PDF_STORAGE_SPECIAL,e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:return e.prev=12,o=(0,u.iH)(u.tO,"".concat(r,"/").concat(n)),e.next=16,(0,u.Jt)(o);case 16:return e.abrupt("return",e.sent);case 19:throw e.prev=19,e.t1=e.catch(12),new Error(e.t1.message);case 22:case"end":return e.stop()}}),e,null,[[12,19]])})));return function(n){return e.apply(this,arguments)}}()),e}return t}(o.Z)},87661:function(e,n,t){"use strict";var r=t(63180),a=r.SMS_SEASONAL,o=r.SMS_TENDAY,u=r.SMS_SPECIAL,i=r.SMS_TYPE,c=r.REPLACE_KEYS,l=r.MONTHS_TAGALOG;e.exports={smsWriter:function(e){var n=e.type,t=e.replacements,r="";if(!Object.values(i).includes(n))throw new Error("Invalid SMS type");switch(n){case i.SEASONAL:r=a;break;case i.TENDAY:r=o;break;case i.SPECIAL:r=u}for(var c in t)r=r.replace("{{".concat(c,"}}"),t[c]);return r},SMS_TYPE:i,REPLACE_KEYS:c,MONTHS_TAGALOG:l}},63180:function(e){"use strict";var n="Magandang araw mga ka-AMIA! Available na ang ating Regional Seasonal Climate Outlook and Advisory para sa buwan ng {{month}}. Bisitahin ang ".concat("","/bulletins/seasonal-outlook/ o makipag-ugnayan sa DA RFO 5 para sa iba pang impormasyon."),t="\nMagandang araw, mga Ka-AMIA! Narito ang ulat panahon para sa darating na sampung araw para sa munisipyo ng {{municipality}}:\n\n{{10_day_forecast}}\nPara sa buong ulat panahon, bisitahin ang ".concat("","/weather-services/#ten-day-weather-forecast o makipag-ugnayan sa DA RFO 5.\n");e.exports={SMS_SEASONAL:n,SMS_TENDAY:t,SMS_SPECIAL:"Mag-ingat sa mga pinsalang maaring idulot ng bagyong {{typhoon_name}}. Ang Signal No.{{signal_no}} ay kasalukuyang nakataas sa munisipyo/siyudad ng {{municipality}}. Maging handa at alerto, mga Ka-AMIA!",SMS_TYPE:{SEASONAL:"seasonal",TENDAY:"tenday",SPECIAL:"special"},REPLACE_KEYS:{SEASONAL:{MONTH:"month"},TENDAY:{MUNICIPALITY:"municipality",FORECAST:"10_day_forecast"},SPECIAL:{TYPHOON_NAME:"typhoon_name",TYPHOON_SIGNAL:"signal_no",MUNICIPALITY:"municipality"}},MONTHS_TAGALOG:{jan:"Enero",feb:"Pebrero",mar:"Marso",apr:"Abril",may:"Mayo",jun:"Hunyo",jul:"Hulyo",aug:"Agosto",sep:"Setyembre",oct:"Octobre",nov:"Nobyembre",dec:"Disyembre"}}}},function(e){e.O(0,[5778,9564,9964,9522,1903,6279,542,7944,6295,1433,6572,1050,3797,3622,9774,2888,179],(function(){return n=13063,e(e.s=n);var n}));var n=e.O();_N_E=n}]);